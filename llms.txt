# dttr2

## Introduction

`dttr2` (Dates, Times and dateTimes in R) is an R package to perform
simple manipulations on date (Date), datetime (POSIXct) and time (hms)
vectors (collectively referred to as date/times).

Key design principles include

1.  use existing classes (Date, POSIXct, hms)
2.  date/times are discrete (floor when encountered)
3.  times are times (wrap when encountered)
4.  maintain the current timezone (principle of least astonishment)
5.  the origin is always assumed to be 1970-01-01 UTC (keep it simple)

## Installation

To install the latest release version from
[CRAN](https://cran.r-project.org/package=dttr2)

``` R
install.packages("dttr2")
```

To install the latest development version from
[GitHub](https://github.com/poissonconsulting/dttr2)

``` R
# install.packages("pak")
pak::pak("poissonconsulting/dttr2")
```

## Introduction

### Time Units

`dttr2` floors any date/time objects it encounters to the nearest time
unit (by default days for Date and seconds for POSIXct and hms).

``` r
library(dttr2)
date <- as.Date(1.75, origin = "1970-01-01")
date
#> [1] "1970-01-02"
as.numeric(date)
#> [1] 1.75

date <- dtt_date(date)
date
#> [1] "1970-01-02"
as.numeric(date)
#> [1] 1
```

Similarly, the time unit accessor
([`dtt_second()`](https://poissonconsulting.github.io/dttr2/reference/dtt_second.md),
[`dtt_minute()`](https://poissonconsulting.github.io/dttr2/reference/dtt_minute.md)
etc) and settor functions as well as the functions to add (ie
[`dtt_add_seconds()`](https://poissonconsulting.github.io/dttr2/reference/dtt_add_units.md))
and subtract time units return or require integers.

``` r
dtt_day(date)
#> [1] 2
dtt_add_days(date, 2L)
#> [1] "1970-01-04"
dtt_add_months(date, 24L)
#> [1] "1972-01-02"
```

### Times

`dttr2` wraps negative times or times greater than 23:59:59 to the
actual clock time.

``` r
time <- hms::as_hms(-3)
time
#> -00:00:03
dtt_time(time)
#> 23:59:57
dtt_time(hms::as_hms("24:00:00"))
#> 00:00:00
```

### Time Zones

The user can override the default time zone (UTC) when handling POSIXct
vectors using
[`dtt_set_default_tz()`](https://poissonconsulting.github.io/dttr2/reference/dtt_default_tz.md).

``` r
dtt_default_tz()
#> [1] "UTC"
date_time <- dtt_date_time("1970-01-01 03:00:00")
dtt_set_default_tz("Etc/GMT+10")
dtt_default_tz()
#> [1] "Etc/GMT+10"
date_time
#> [1] "1970-01-01 03:00:00 UTC"
```

They can assign a new time zone to a POSIXct object whilst leaving the
clock time unchanged using
[`dtt_set_tz()`](https://poissonconsulting.github.io/dttr2/reference/dtt_set_tz.md)
or adjust the time zone so that clock (but not the actual) time is
altered using
[`dtt_adjust_tz()`](https://poissonconsulting.github.io/dttr2/reference/dtt_adjust_tz.md)

``` r
date_time
#> [1] "1970-01-01 03:00:00 UTC"
dtt_set_tz(date_time)
#> [1] "1970-01-01 03:00:00 -10"
dtt_adjust_tz(date_time)
#> [1] "1969-12-31 17:00:00 -10"
```

### Combining Dates and Times

`dttr2` makes it easy to decompose POSIXct vectors into Date and hms
vectors and then recombine them again.

As neither dates nor times have associated time zones unless the user
passes a value they are assigned the default time zone.

``` r
date_time
#> [1] "1970-01-01 03:00:00 UTC"
date <- dtt_date(date_time)
date
#> [1] "1970-01-01"
time <- dtt_time(date_time)
time
#> 03:00:00
dtt_date_time(date, time)
#> [1] "1970-01-01 03:00:00 -10"
```

## Inspiration

dttr2 was influenced by [lubridate](https://lubridate.tidyverse.org). It
aims to provide an alternative for simple manipulations.

## Contribution

Please report any
[issues](https://github.com/poissonconsulting/dttr2/issues).

[Pull requests](https://github.com/poissonconsulting/dttr2/pulls) are
always welcome.

## Code of Conduct

Please note that the dttr2 project is released with a [Contributor Code
of
Conduct](https://contributor-covenant.org/version/2/0/CODE_OF_CONDUCT.html).
By contributing to this project, you agree to abide by its terms.

# Package index

## Add Units

Add time units

- [`dtt_add_units()`](https://poissonconsulting.github.io/dttr2/reference/dtt_add_units.md)
  [`dtt_add_years()`](https://poissonconsulting.github.io/dttr2/reference/dtt_add_units.md)
  [`dtt_add_months()`](https://poissonconsulting.github.io/dttr2/reference/dtt_add_units.md)
  [`dtt_add_days()`](https://poissonconsulting.github.io/dttr2/reference/dtt_add_units.md)
  [`dtt_add_hours()`](https://poissonconsulting.github.io/dttr2/reference/dtt_add_units.md)
  [`dtt_add_minutes()`](https://poissonconsulting.github.io/dttr2/reference/dtt_add_units.md)
  [`dtt_add_seconds()`](https://poissonconsulting.github.io/dttr2/reference/dtt_add_units.md)
  : Add Time Units
- [`dtt_date_add_time()`](https://poissonconsulting.github.io/dttr2/reference/dtt_date_add_time.md)
  : Add Time to Date

## Complete Date/Time

Complete and test completed date/time vectors

- [`dtt_complete()`](https://poissonconsulting.github.io/dttr2/reference/dtt_complete.md)
  : Complete
- [`dtt_completed()`](https://poissonconsulting.github.io/dttr2/reference/dtt_completed.md)
  : Completed

## Floor Vectors

Coerce and test floored date/time vectors

- [`dtt_date()`](https://poissonconsulting.github.io/dttr2/reference/dtt_date.md)
  [`` `dtt_date<-`() ``](https://poissonconsulting.github.io/dttr2/reference/dtt_date.md)
  [`dtt_set_date()`](https://poissonconsulting.github.io/dttr2/reference/dtt_date.md)
  : Floor Date
- [`dtt_date_time()`](https://poissonconsulting.github.io/dttr2/reference/dtt_date_time.md)
  : Floor Date/Time
- [`dtt_floor()`](https://poissonconsulting.github.io/dttr2/reference/dtt_floor.md)
  : Floor Date/Time
- [`dtt_floored()`](https://poissonconsulting.github.io/dttr2/reference/dtt_floored.md)
  : Test Floored
- [`dtt_set_time()`](https://poissonconsulting.github.io/dttr2/reference/dtt_time.md)
  [`dtt_time()`](https://poissonconsulting.github.io/dttr2/reference/dtt_time.md)
  [`` `dtt_time<-`() ``](https://poissonconsulting.github.io/dttr2/reference/dtt_time.md)
  : Floor Time

## Get Decimal Date/Time

Get decimal values for date/time vectors

- [`dtt_minute_decimal()`](https://poissonconsulting.github.io/dttr2/reference/dtt_minute_decimal.md)
  : Get Decimal Minute Values
- [`dtt_hour_decimal()`](https://poissonconsulting.github.io/dttr2/reference/dtt_hour_decimal.md)
  : Get Decimal Hour Values
- [`dtt_day_decimal()`](https://poissonconsulting.github.io/dttr2/reference/dtt_day_decimal.md)
  : Get Decimal Day Values
- [`dtt_month_decimal()`](https://poissonconsulting.github.io/dttr2/reference/dtt_month_decimal.md)
  : Get Decimal Month Values
- [`dtt_year_decimal()`](https://poissonconsulting.github.io/dttr2/reference/dtt_year_decimal.md)
  : Get Decimal Year Values
- [`dtt_doy_decimal()`](https://poissonconsulting.github.io/dttr2/reference/dtt_doy_decimal.md)
  : Day of the Year Decimal

## Get and Set

Get and set values for date/time vectors

- [`dtt_years()`](https://poissonconsulting.github.io/dttr2/reference/dtt_year.md)
  [`` `dtt_years<-`() ``](https://poissonconsulting.github.io/dttr2/reference/dtt_year.md)
  [`dtt_set_year()`](https://poissonconsulting.github.io/dttr2/reference/dtt_year.md)
  [`dtt_year()`](https://poissonconsulting.github.io/dttr2/reference/dtt_year.md)
  [`` `dtt_year<-`() ``](https://poissonconsulting.github.io/dttr2/reference/dtt_year.md)
  : Get and Set Year Values
- [`dtt_months()`](https://poissonconsulting.github.io/dttr2/reference/dtt_month.md)
  [`` `dtt_months<-`() ``](https://poissonconsulting.github.io/dttr2/reference/dtt_month.md)
  [`dtt_month()`](https://poissonconsulting.github.io/dttr2/reference/dtt_month.md)
  [`` `dtt_month<-`() ``](https://poissonconsulting.github.io/dttr2/reference/dtt_month.md)
  [`dtt_set_month()`](https://poissonconsulting.github.io/dttr2/reference/dtt_month.md)
  : Get and Set Month Values
- [`dtt_day()`](https://poissonconsulting.github.io/dttr2/reference/dtt_day.md)
  [`` `dtt_day<-`() ``](https://poissonconsulting.github.io/dttr2/reference/dtt_day.md)
  [`dtt_days()`](https://poissonconsulting.github.io/dttr2/reference/dtt_day.md)
  [`` `dtt_days<-`() ``](https://poissonconsulting.github.io/dttr2/reference/dtt_day.md)
  [`dtt_set_day()`](https://poissonconsulting.github.io/dttr2/reference/dtt_day.md)
  : Get and Set Day Values
- [`dtt_hours()`](https://poissonconsulting.github.io/dttr2/reference/dtt_hour.md)
  [`` `dtt_hours<-`() ``](https://poissonconsulting.github.io/dttr2/reference/dtt_hour.md)
  [`dtt_hour()`](https://poissonconsulting.github.io/dttr2/reference/dtt_hour.md)
  [`` `dtt_hour<-`() ``](https://poissonconsulting.github.io/dttr2/reference/dtt_hour.md)
  [`dtt_set_hour()`](https://poissonconsulting.github.io/dttr2/reference/dtt_hour.md)
  : Get and Set Hour Values
- [`dtt_minutes()`](https://poissonconsulting.github.io/dttr2/reference/dtt_minute.md)
  [`` `dtt_minutes<-`() ``](https://poissonconsulting.github.io/dttr2/reference/dtt_minute.md)
  [`dtt_minute()`](https://poissonconsulting.github.io/dttr2/reference/dtt_minute.md)
  [`` `dtt_minute<-`() ``](https://poissonconsulting.github.io/dttr2/reference/dtt_minute.md)
  [`dtt_set_minute()`](https://poissonconsulting.github.io/dttr2/reference/dtt_minute.md)
  : Get and Set Minute Values
- [`dtt_seconds()`](https://poissonconsulting.github.io/dttr2/reference/dtt_second.md)
  [`` `dtt_seconds<-`() ``](https://poissonconsulting.github.io/dttr2/reference/dtt_second.md)
  [`dtt_second()`](https://poissonconsulting.github.io/dttr2/reference/dtt_second.md)
  [`` `dtt_second<-`() ``](https://poissonconsulting.github.io/dttr2/reference/dtt_second.md)
  [`dtt_set_second()`](https://poissonconsulting.github.io/dttr2/reference/dtt_second.md)
  : Get and Set Second Values

## Get, Set or Adjust Time Zone

Get, set or reset default time

- [`dtt_tz()`](https://poissonconsulting.github.io/dttr2/reference/dtt_tz.md)
  : Get, Set or Adjust Time Zone
- [`dtt_adjust_tz()`](https://poissonconsulting.github.io/dttr2/reference/dtt_adjust_tz.md)
  : Adjust Time Zone
- [`dtt_sys_tz()`](https://poissonconsulting.github.io/dttr2/reference/dtt_default_tz.md)
  [`dtt_set_sys_tz()`](https://poissonconsulting.github.io/dttr2/reference/dtt_default_tz.md)
  [`dtt_reset_sys_tz()`](https://poissonconsulting.github.io/dttr2/reference/dtt_default_tz.md)
  [`dtt_default_tz()`](https://poissonconsulting.github.io/dttr2/reference/dtt_default_tz.md)
  [`dtt_set_default_tz()`](https://poissonconsulting.github.io/dttr2/reference/dtt_default_tz.md)
  [`dtt_reset_default_tz()`](https://poissonconsulting.github.io/dttr2/reference/dtt_default_tz.md)
  : Get, Set or Reset Default Time Zone
- [`dtt_set_tz()`](https://poissonconsulting.github.io/dttr2/reference/dtt_set_tz.md)
  : Set Time Zone

## Get System Date/Time

Get system date/time

- [`dtt_sys_date()`](https://poissonconsulting.github.io/dttr2/reference/dtt_sys_date.md)
  : Get System Date
- [`dtt_sys_date_time()`](https://poissonconsulting.github.io/dttr2/reference/dtt_sys_date_time.md)
  : Get System Date Time
- [`dtt_sys_time()`](https://poissonconsulting.github.io/dttr2/reference/dtt_sys_time.md)
  : Get System Time

## Get Units

Get and adjust units

- [`dtt_adjust_units()`](https://poissonconsulting.github.io/dttr2/reference/dtt_adjust_units.md)
  : Adjust Units
- [`dtt_units()`](https://poissonconsulting.github.io/dttr2/reference/dtt_units.md)
  : Get Units
- [`dtt_units_per_unit()`](https://poissonconsulting.github.io/dttr2/reference/dtt_units_per_unit.md)
  : Units per Unit

## Leap Year

Convert and test leap years

- [`dtt_feb29_to_28()`](https://poissonconsulting.github.io/dttr2/reference/dtt_feb29_to_28.md)
  : Convert Feb 29 to Feb 28
- [`dtt_leap_year()`](https://poissonconsulting.github.io/dttr2/reference/dtt_leap_year.md)
  : Test for Leap Year

## Set Days/Dayte

Set days in month/year

- [`dtt_dayte()`](https://poissonconsulting.github.io/dttr2/reference/dtt_dayte.md)
  : Dayte
- [`dtt_dayte_time()`](https://poissonconsulting.github.io/dttr2/reference/dtt_dayte_time.md)
  : Dayte Time
- [`dtt_daytt()`](https://poissonconsulting.github.io/dttr2/reference/dtt_daytt.md)
  : Dayte Time
- [`dtt_days_in_month()`](https://poissonconsulting.github.io/dttr2/reference/dtt_days_in_month.md)
  : Days in the Month
- [`dtt_days_in_year()`](https://poissonconsulting.github.io/dttr2/reference/dtt_days_in_year.md)
  : Days in the Year
- [`dtt_doy_to_date()`](https://poissonconsulting.github.io/dttr2/reference/dtt_doy_to_date.md)
  : Day of the Year to Date
- [`dtt_doy()`](https://poissonconsulting.github.io/dttr2/reference/dtt_doy.md)
  : Day of the Year

## Subtract Units

Subtract time units

- [`dtt_subtract_units()`](https://poissonconsulting.github.io/dttr2/reference/dtt_subtract_units.md)
  [`dtt_subtract_years()`](https://poissonconsulting.github.io/dttr2/reference/dtt_subtract_units.md)
  [`dtt_subtract_months()`](https://poissonconsulting.github.io/dttr2/reference/dtt_subtract_units.md)
  [`dtt_subtract_days()`](https://poissonconsulting.github.io/dttr2/reference/dtt_subtract_units.md)
  [`dtt_subtract_hours()`](https://poissonconsulting.github.io/dttr2/reference/dtt_subtract_units.md)
  [`dtt_subtract_minutes()`](https://poissonconsulting.github.io/dttr2/reference/dtt_subtract_units.md)
  [`dtt_subtract_seconds()`](https://poissonconsulting.github.io/dttr2/reference/dtt_subtract_units.md)
  : Subtract Time Units

## Check Time

Check time/time zone

- [`check_tz()`](https://poissonconsulting.github.io/dttr2/reference/check_tz.md)
  : Check Time Zone
- [`chk_time()`](https://poissonconsulting.github.io/dttr2/reference/chk_time.md)
  : Check Time

## Test Date/Time Object

Test if object is a date/time vector

- [`dtt_is_date()`](https://poissonconsulting.github.io/dttr2/reference/dtt_is_date.md)
  : Is Date
- [`dtt_is_date_time()`](https://poissonconsulting.github.io/dttr2/reference/dtt_is_date_time.md)
  : Is Date Time
- [`dtt_is_dtt()`](https://poissonconsulting.github.io/dttr2/reference/dtt_is_dtt.md)
  : Is Date or DateTime Object
- [`is.POSIXct()`](https://poissonconsulting.github.io/dttr2/reference/is_date_time.md)
  [`is_date_time()`](https://poissonconsulting.github.io/dttr2/reference/is_date_time.md)
  [`is.Date()`](https://poissonconsulting.github.io/dttr2/reference/is_date_time.md)
  [`is_date()`](https://poissonconsulting.github.io/dttr2/reference/is_date_time.md)
  [`is.hms()`](https://poissonconsulting.github.io/dttr2/reference/is_date_time.md)
  [`is_time()`](https://poissonconsulting.github.io/dttr2/reference/is_date_time.md)
  : Is Date/Time

## Missing Date/Time

Missing date/time

- [`NA_Date_`](https://poissonconsulting.github.io/dttr2/reference/NA_Date_.md)
  : Missing Date
- [`NA_hms_`](https://poissonconsulting.github.io/dttr2/reference/NA_hms_.md)
  : Missing hms
- [`NA_POSIXct_`](https://poissonconsulting.github.io/dttr2/reference/NA_POSIXct_.md)
  : Missing POSIXct

## Other Date/Time Components

Miscellaneous

- [`dtt`](https://poissonconsulting.github.io/dttr2/reference/dtt.md) :
  dtt Object
- [`dtt_aggregate()`](https://poissonconsulting.github.io/dttr2/reference/dtt_aggregate.md)
  : Aggregate Date/Time
- [`dtt_decade()`](https://poissonconsulting.github.io/dttr2/reference/dtt_decade.md)
  : Decade
- [`dtt_diff()`](https://poissonconsulting.github.io/dttr2/reference/dtt_diff.md)
  : Time Difference
- [`dtt_excel_to_date()`](https://poissonconsulting.github.io/dttr2/reference/dtt_excel_to_date.md)
  : Convert Excel dates to dates.
- [`dtt_excel_to_date_time()`](https://poissonconsulting.github.io/dttr2/reference/dtt_excel_to_date_time.md)
  : Convert Excel date times to date times.
- [`dtt_excel_to_time()`](https://poissonconsulting.github.io/dttr2/reference/dtt_excel_to_time.md)
  : Convert Excel times to times.
- [`dtt_season()`](https://poissonconsulting.github.io/dttr2/reference/dtt_season.md)
  : Season
- [`dtt_study_year()`](https://poissonconsulting.github.io/dttr2/reference/dtt_study_year.md)
  : Study Year
- [`dtt_wday()`](https://poissonconsulting.github.io/dttr2/reference/dtt_wday.md)
  : Get Week Day
- [`dtt_seq()`](https://poissonconsulting.github.io/dttr2/reference/dtt_seq.md)
  : Sequence
- [`dtt_wrap()`](https://poissonconsulting.github.io/dttr2/reference/dtt_wrap.md)
  : Wrap
- [`vld_time()`](https://poissonconsulting.github.io/dttr2/reference/vld_time.md)
  : Validate Time
- [`dtt_date_from_ints()`](https://poissonconsulting.github.io/dttr2/reference/dtt_date_from_ints.md)
  : Create Dates from Integers
- [`dtt_time_from_ints()`](https://poissonconsulting.github.io/dttr2/reference/dtt_time_from_ints.md)
  : Create Time from Vectors
- [`dtt_date_time_from_ints()`](https://poissonconsulting.github.io/dttr2/reference/dtt_date_time_from_ints.md)
  : Create Date Times from Integers

